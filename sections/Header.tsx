import type { ImageWidget } from "apps/admin/widgets.ts";
import Image from "apps/website/components/Image.tsx";
import Icon from "../components/ui/Icon.tsx";
import { useDevice } from "@deco/deco/hooks";

export interface CTA {
  id?: string;
  href: string;
  text: string;
  outline?: boolean;
}

export interface Nav {
  logo?: {
    src?: ImageWidget;
    alt?: string;
  };
  navigation?: {
    links: {
      label?: string;
      url?: string;
    }[];
    buttons: CTA[];
  };
}

export default function Header({
  logo,
  navigation,
}: Nav) {
  const device = useDevice();
  return (
    <nav
      class="drawer text-[#000A36]"
      style={{
        boxShadow: "0px 4px 10px 0px rgba(0, 0, 0, 0.10);",
      }}
    >
      {device === "mobile" && (
        <input id="mobile-drawer-nav" type="checkbox" class="drawer-toggle" />
      )}
      {/* main content */}
      <div class="drawer-content container lg:px-0 px-4 flex gap-8 items-center justify-between py-5">
        <label
          htmlFor="mobile-drawer-nav"
          class="flex lg:hidden btn btn-ghost drawer-button"
        >
          <Icon id="Bars3" size={32} strokeWidth={0.1} />
        </label>

        <a
          href="/"
          class="absolute left-1/2 -translate-x-1/2 top-1/2 -translate-y-1/2 lg:translate-y-0 lg:translate-x-0 lg:static"
        >
          <img
            class="w-full h-auto max-w-[225px]"
            src={logo?.src || ""}
            width={100}
            height={28}
            alt={logo?.alt}
          />
        </a>

        <div class="hidden items-center justify-center gap-16 lg:flex">
          <ul class="flex">
            {navigation?.links.map((link) => (
              <li>
                <a
                  href={link.url}
                  aria-label={link.label}
                  class="link no-underline hover:underline p-4 text-base"
                >
                  {link.label}
                </a>
              </li>
            ))}
          </ul>
          <ul class="flex gap-3">
            {navigation?.buttons?.map((item) => {
              if (item.id === "Whatsapp") {
                return (
                  (
                    <a
                      key={item?.id}
                      id={item?.id}
                      href={item?.href ?? "#"}
                      target={item?.href.includes("http") ? "_blank" : "_self"}
                      class={`btn btn-primary rounded-[10px] px-8 text-white font-semibold text-base ${
                        item.outline && "btn-outline"
                      }`}
                    >
                      <svg
                        width="25"
                        height="25"
                        viewBox="0 0 25 25"
                        fill="none"
                        xmlns="http://www.w3.org/2000/svg"
                      >
                        <path
                          d="M18.8222 14.7988C18.668 14.7121 18.4933 14.6137 18.2827 14.4871C18.1652 14.4161 18.0175 14.3191 17.861 14.2164C17.0575 13.689 16.4487 13.3157 15.9304 13.3157C15.809 13.3157 15.6942 13.3363 15.5895 13.3766C15.1355 13.5515 14.7626 14.0186 14.4021 14.4703C14.2699 14.6358 14.0808 14.8727 13.966 14.9786C13.5108 14.8958 12.5505 14.301 11.5144 13.2648C10.477 12.2274 9.88204 11.2661 9.80037 10.8119C9.90613 10.6968 10.1449 10.5062 10.3114 10.3732C10.7614 10.014 11.2267 9.64253 11.4025 9.18988C11.6268 8.60831 11.2157 7.91277 10.5629 6.9182C10.4602 6.76166 10.3631 6.61382 10.2927 6.49723C10.1655 6.2859 10.0672 6.11106 9.9805 5.95695C9.62455 5.32435 9.38938 4.90625 8.50568 4.90625C7.93213 4.90625 7.12122 5.44823 6.57194 5.98572C5.77368 6.76701 5.33398 7.66902 5.33398 8.52736C5.3355 10.8587 6.63658 13.5306 8.90365 15.8608C8.90754 15.8647 8.91143 15.8657 8.91545 15.8696C11.2456 18.1368 13.9191 19.4334 16.2503 19.4334H16.2512C17.1084 19.4334 18.0107 18.9988 18.7919 18.2009C19.3299 17.6517 19.8726 16.8467 19.8726 16.2735C19.8726 15.3899 19.4548 15.1548 18.8222 14.7988ZM16.2505 18.229C14.2648 18.2275 11.8425 17.0241 9.76966 15.0097C7.75503 12.9366 6.55163 10.5141 6.55035 8.52858C6.55035 7.32754 8.10892 6.18562 8.5165 6.12304C8.59976 6.1234 8.64342 6.12833 8.66422 6.13186C8.7181 6.19389 8.8252 6.38424 8.92056 6.55373C9.00685 6.70711 9.11431 6.89807 9.25115 7.12545C9.33386 7.26247 9.437 7.41956 9.54616 7.58583C9.75275 7.9006 10.1681 8.53332 10.2381 8.8034C10.121 8.96913 9.75774 9.25909 9.55267 9.42281C9.02777 9.84188 8.57446 10.2037 8.57446 10.7151C8.57573 11.9504 10.1668 13.6374 10.6545 14.125C11.1421 14.6126 12.8291 16.2038 14.067 16.205C14.5751 16.2033 14.9354 15.7519 15.3527 15.2292C15.5173 15.0231 15.809 14.6577 15.9754 14.5412C16.2452 14.6107 16.8787 15.0265 17.1937 15.2333C17.36 15.3424 17.517 15.4455 17.6549 15.5288C17.8815 15.6651 18.0724 15.7726 18.2258 15.8589C18.3952 15.9542 18.5857 16.0614 18.6477 16.1153C18.6512 16.136 18.6561 16.1797 18.6565 16.2629C18.5934 16.6701 17.4512 18.2275 16.2505 18.229Z"
                          fill="white"
                        />
                        <path
                          d="M24.6949 12.4603C24.6522 9.17378 23.333 6.06819 20.9804 3.71556C18.5845 1.31957 15.4218 0 12.0749 0C8.84406 0 5.82167 1.24318 3.56434 3.50046C1.56121 5.50359 0.332259 8.17519 0.103655 11.0232C-0.113151 13.7254 0.574728 16.4599 2.0436 18.759L0.0377918 24.1808C-0.0463763 24.4084 0.0127361 24.6642 0.188309 24.8318C0.303676 24.9419 0.454801 25 0.608298 25C0.688331 25 0.769094 24.9768 0.84566 24.9443L6.06962 22.7213C8.06387 23.9625 10.3442 24.6022 12.6857 24.6022H12.6859C15.9162 24.6022 18.9385 23.3739 21.1956 21.1168C23.4948 18.8175 24.7377 15.7527 24.6949 12.4603ZM20.3354 20.2716C18.3079 22.299 15.5912 23.4155 12.6856 23.4155C10.4736 23.4154 8.32148 22.768 6.46187 21.543C6.36104 21.4766 6.24452 21.4428 6.12733 21.4428C6.04687 21.4428 5.96611 21.4587 5.88991 21.4911L1.66715 23.2821L3.29091 18.893C3.35884 18.7093 3.33415 18.5041 3.22463 18.3418C0.240063 13.9202 0.744646 8.04025 4.42439 4.36057C6.45196 2.33299 9.16894 1.2163 12.0749 1.2163C15.0968 1.2163 17.9541 2.40931 20.1203 4.57561C22.2475 6.70268 23.4401 9.50844 23.4787 12.4761C23.5172 15.4377 22.4008 18.2062 20.3354 20.2716Z"
                          fill="white"
                        />
                      </svg>
                      {item?.text}
                    </a>
                  )
                );
              } else {
                return (
                  (
                    <a
                      key={item?.id}
                      id={item?.id}
                      href={item?.href ?? "#"}
                      target={item?.href.includes("http") ? "_blank" : "_self"}
                      class={`font-normal btn btn-primary ${
                        item.outline && "btn-outline"
                      }`}
                    >
                      {item?.text}
                    </a>
                  )
                );
              }
            })}
          </ul>
        </div>
      </div>

      {/* sidebar */}
      <aside class="drawer-side z-50">
        {/* Close when clicking on overlay */}
        <label
          htmlFor="mobile-drawer-nav"
          aria-label="close sidebar"
          class="drawer-overlay"
        />

        <div class="flex flex-col gap-8 min-h-full w-80 bg-base-100 text-base-content">
          <a class="p-4" href="/">
            <Image
              src={logo?.src || ""}
              width={100}
              height={28}
              alt={logo?.alt}
            />
          </a>

          <ul class="menu">
            {navigation?.links.map((link) => (
              <li>
                <a href={link.url} aria-label={link.label}>
                  {link.label}
                </a>
              </li>
            ))}
          </ul>

          <ul class="p-4 flex items-center gap-3">
            {navigation?.buttons?.map((item) => {
              if (item.id === "Whatsapp") {
                return (
                  (
                    <a
                      key={item?.id}
                      id={item?.id}
                      href={item?.href ?? "#"}
                      target={item?.href.includes("http") ? "_blank" : "_self"}
                      class={`font-normal btn btn-primary ${
                        item.outline && "btn-outline"
                      }`}
                    >
                      <svg
                        width="25"
                        height="25"
                        viewBox="0 0 25 25"
                        fill="none"
                        xmlns="http://www.w3.org/2000/svg"
                      >
                        <path
                          d="M18.8222 14.7988C18.668 14.7121 18.4933 14.6137 18.2827 14.4871C18.1652 14.4161 18.0175 14.3191 17.861 14.2164C17.0575 13.689 16.4487 13.3157 15.9304 13.3157C15.809 13.3157 15.6942 13.3363 15.5895 13.3766C15.1355 13.5515 14.7626 14.0186 14.4021 14.4703C14.2699 14.6358 14.0808 14.8727 13.966 14.9786C13.5108 14.8958 12.5505 14.301 11.5144 13.2648C10.477 12.2274 9.88204 11.2661 9.80037 10.8119C9.90613 10.6968 10.1449 10.5062 10.3114 10.3732C10.7614 10.014 11.2267 9.64253 11.4025 9.18988C11.6268 8.60831 11.2157 7.91277 10.5629 6.9182C10.4602 6.76166 10.3631 6.61382 10.2927 6.49723C10.1655 6.2859 10.0672 6.11106 9.9805 5.95695C9.62455 5.32435 9.38938 4.90625 8.50568 4.90625C7.93213 4.90625 7.12122 5.44823 6.57194 5.98572C5.77368 6.76701 5.33398 7.66902 5.33398 8.52736C5.3355 10.8587 6.63658 13.5306 8.90365 15.8608C8.90754 15.8647 8.91143 15.8657 8.91545 15.8696C11.2456 18.1368 13.9191 19.4334 16.2503 19.4334H16.2512C17.1084 19.4334 18.0107 18.9988 18.7919 18.2009C19.3299 17.6517 19.8726 16.8467 19.8726 16.2735C19.8726 15.3899 19.4548 15.1548 18.8222 14.7988ZM16.2505 18.229C14.2648 18.2275 11.8425 17.0241 9.76966 15.0097C7.75503 12.9366 6.55163 10.5141 6.55035 8.52858C6.55035 7.32754 8.10892 6.18562 8.5165 6.12304C8.59976 6.1234 8.64342 6.12833 8.66422 6.13186C8.7181 6.19389 8.8252 6.38424 8.92056 6.55373C9.00685 6.70711 9.11431 6.89807 9.25115 7.12545C9.33386 7.26247 9.437 7.41956 9.54616 7.58583C9.75275 7.9006 10.1681 8.53332 10.2381 8.8034C10.121 8.96913 9.75774 9.25909 9.55267 9.42281C9.02777 9.84188 8.57446 10.2037 8.57446 10.7151C8.57573 11.9504 10.1668 13.6374 10.6545 14.125C11.1421 14.6126 12.8291 16.2038 14.067 16.205C14.5751 16.2033 14.9354 15.7519 15.3527 15.2292C15.5173 15.0231 15.809 14.6577 15.9754 14.5412C16.2452 14.6107 16.8787 15.0265 17.1937 15.2333C17.36 15.3424 17.517 15.4455 17.6549 15.5288C17.8815 15.6651 18.0724 15.7726 18.2258 15.8589C18.3952 15.9542 18.5857 16.0614 18.6477 16.1153C18.6512 16.136 18.6561 16.1797 18.6565 16.2629C18.5934 16.6701 17.4512 18.2275 16.2505 18.229Z"
                          fill="white"
                        />
                        <path
                          d="M24.6949 12.4603C24.6522 9.17378 23.333 6.06819 20.9804 3.71556C18.5845 1.31957 15.4218 0 12.0749 0C8.84406 0 5.82167 1.24318 3.56434 3.50046C1.56121 5.50359 0.332259 8.17519 0.103655 11.0232C-0.113151 13.7254 0.574728 16.4599 2.0436 18.759L0.0377918 24.1808C-0.0463763 24.4084 0.0127361 24.6642 0.188309 24.8318C0.303676 24.9419 0.454801 25 0.608298 25C0.688331 25 0.769094 24.9768 0.84566 24.9443L6.06962 22.7213C8.06387 23.9625 10.3442 24.6022 12.6857 24.6022H12.6859C15.9162 24.6022 18.9385 23.3739 21.1956 21.1168C23.4948 18.8175 24.7377 15.7527 24.6949 12.4603ZM20.3354 20.2716C18.3079 22.299 15.5912 23.4155 12.6856 23.4155C10.4736 23.4154 8.32148 22.768 6.46187 21.543C6.36104 21.4766 6.24452 21.4428 6.12733 21.4428C6.04687 21.4428 5.96611 21.4587 5.88991 21.4911L1.66715 23.2821L3.29091 18.893C3.35884 18.7093 3.33415 18.5041 3.22463 18.3418C0.240063 13.9202 0.744646 8.04025 4.42439 4.36057C6.45196 2.33299 9.16894 1.2163 12.0749 1.2163C15.0968 1.2163 17.9541 2.40931 20.1203 4.57561C22.2475 6.70268 23.4401 9.50844 23.4787 12.4761C23.5172 15.4377 22.4008 18.2062 20.3354 20.2716Z"
                          fill="white"
                        />
                      </svg>
                      {item?.text}
                    </a>
                  )
                );
              } else {
                return (
                  (
                    <a
                      key={item?.id}
                      id={item?.id}
                      href={item?.href ?? "#"}
                      target={item?.href.includes("http") ? "_blank" : "_self"}
                      class={`font-normal btn btn-primary ${
                        item.outline && "btn-outline"
                      }`}
                    >
                      {item?.text}
                    </a>
                  )
                );
              }
            })}
          </ul>
        </div>
      </aside>
    </nav>
  );
}
